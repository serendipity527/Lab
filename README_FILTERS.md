# 图像频域滤波去尘处理

## 功能说明

该工具使用傅里叶变换和频域滤波器对图像进行去尘处理，支持以下滤波器：

### 滤波器类型

1. **高斯低通滤波器** (Gaussian Lowpass Filter)
   - 保留低频分量，去除高频噪声
   - 适用于平滑图像、去除细小噪声
   - 会使图像变得模糊，但能有效去除噪声

2. **高斯高通滤波器** (Gaussian Highpass Filter)
   - 保留高频分量（边缘），去除低频
   - 适用于边缘检测、增强图像细节
   - 会突出显示边缘和纹理

3. **巴特沃斯低通滤波器** (Butterworth Lowpass Filter)
   - 平滑过渡的低通滤波
   - 相比高斯滤波器有更陡峭的截止特性
   - 在频域有更好的控制性能

4. **巴特沃斯高通滤波器** (Butterworth Highpass Filter)
   - 平滑过渡的高通滤波
   - 增强边缘和细节，同时避免振铃效应

## 使用方法

### 1. 运行滤波处理

```bash
# 激活虚拟环境
source .venv/bin/activate

# 运行滤波程序
python image_fourier_filter.py
```

### 2. 自定义参数

在 `image_fourier_filter.py` 中修改以下参数：

```python
# 输入目录（第228行）
input_dir = "output/extracted_frames"

# 输出目录（第231行）
output_dir = "output/filtered"

# 滤波器参数（第210-239行）
'd0': 30,  # 截止频率（像素），越小滤波效果越强
'n': 2,    # 巴特沃斯滤波器阶数，越大过渡越陡峭
```

### 3. 调整截止频率 (d0)

- **低通滤波器**：
  - `d0 = 10-20`: 强烈平滑，去除大部分细节和噪声
  - `d0 = 30-50`: 中等平滑，保留主要结构
  - `d0 = 60-100`: 轻微平滑，保留较多细节

- **高通滤波器**：
  - `d0 = 10-20`: 保留更多边缘和细节
  - `d0 = 30-50`: 中等边缘增强
  - `d0 = 60-100`: 轻微边缘增强

## 输出结果

对于每个输入图像，程序会生成：

1. **滤波后的图像** (`*_滤波器类型.jpg`)
   - 应用滤波器后的处理结果

2. **可视化结果** (`*_滤波器类型_visualization.png`)
   - 包含6个子图：
     - 原始图像
     - 傅里叶频谱
     - 滤波器掩码
     - 滤波后的频谱
     - 滤波后的图像
     - 差异图像（显示被滤除的内容）

## 去尘建议

针对煤矿粉尘图像：

1. **推荐使用低通滤波器**去除高频噪声（粉尘颗粒）
   - 建议参数：`d0 = 25-35`

2. **高通滤波器**可用于分析粉尘分布
   - 会突出显示粉尘颗粒和边缘

3. **对比不同滤波器**找到最佳效果
   - 巴特沃斯滤波器通常比高斯滤波器有更好的频率选择性

## 工作流程

```
视频文件 → 抽取帧（video_frame_extractor.py）
         ↓
    提取的图像（output/extracted_frames/）
         ↓
    频域滤波（image_fourier_filter.py）
         ↓
    滤波结果（output/filtered/）
```

## 依赖项

- opencv-python: 图像读取和处理
- numpy: 数值计算和傅里叶变换
- matplotlib: 可视化结果
